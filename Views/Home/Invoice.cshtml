@{
    var totalPriceofProduct = 0.0;
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
    var order = ViewBag.Invoice;
}
<section id="center" class="p_3 bg_light">
	<div class="container-xl">
		<div class="row center_1">
			<div class="col-md-12">
                <h6 class="font_14"><a asp-action="Index" asp-controller="Home">Trang chủ</a>  <span class="mx-2">/</span>  <span class="col_red">@ViewData["title"]</span></h6>
                <h2 class="mb-0 mt-3 lh-1">@ViewData["title"]</h2>
			</div>
		</div>
	</div>
</section>


<section id="cart_page" class="cart p_3">
    <div class="container-xl">
        <div class="cart_2 row">
        </div>
    <div class="page-inner">
            <div class="mb-3">
                <label for="name" class="form-label">Tên khách hàng</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.FullName">
            </div>

            <div class="mb-3">
                <label for="name" class="form-label">Địa chỉ</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.Address">
            </div>

            <div class="mb-3">
                <label for="name" class="form-label">Số điện thoại</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.PhoneNumber">
            </div>

            <div class="mb-3">
                <label for="datepurchase" class="form-label">Ngày đặt: @order.DateOrder</label><br>
            </div>
            @if (@order.DateReceive != null){
            <div class="mb-3">
                <label for="datepurchase" class="form-label">Ngày giao hàng: @order.DateReceive</label>
            </div>
            }
            <!-- bảng hàng hóa -->
            <div class="mb-3">
                <table class="table" id="tableProduct">
                    <thead>
                        <tr>
                            <th>Tên sản phẩm</th>
                            <th>Danh mục</th>
                            <th>Màu sắc</th>
                            <th>Kích thước</th>
                            <th>Chất liệu</th>
                            <th>Nhà sản xuất</th>
                            <th>Số lượng</th>
                            <th>Đơn giá</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var detail in order.OrderProductDetails)
                        {
                            
                            <tr>
                                <td>@detail.Product.Name</td>
                                <td>@detail.Product.Category.Name</td>
                                <td>@detail.Product.Color</td>
                                <td>@detail.Product.Dimension</td>
                                <td>@detail.Product.Material</td>
                                <td>@detail.Product.Productor</td>
                                <td>@detail.Quantity</td>
                                <td>@detail.PriceSale.ToString("N0")</td>
                                <td>
                                    @{
                                       totalPriceofProduct += detail.Quantity * detail.PriceSale;
                                    }
                                    @totalPriceofProduct.ToString("N0")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="mb-3">
                <label for="tongTien">Phí vận chuyển:</label>
                <input type="number" disabled class="form-control" id="tongTien" name="" value="@order.DeliveryCost">
            </div>
@*             <div class="mb-3">
                @{
                    //kiem tra otherCost no co null hay k
                    // var otherCost = order.OtherCost;
                    // if (otherCost == null)
                    // {
                    //     otherCost = 0;
                    // }

                }
                <label for="tongTien">Phí khác:</label>
                <input type="number" disabled class="form-control" id="tongTien" name="" value="@otherCost">
            </div> *@

            <div class="mb-3">
                @{
                    var totalPrice = totalPriceofProduct + order.DeliveryCost;
                }
                <label for="tongTien">Tổng tiền:</label>
                <input type="number" class="form-control" id="tongTien" name="" disabled value="@totalPrice">
            </div>

            <div class="mb-3">
                <label for="office" class="form-label">Ghi chú (nếu có)</label>
                <textarea class="form-control" disabled rows="5" name="note" id=""></textarea>
            </div>

    </div>
    </div>
</section>
