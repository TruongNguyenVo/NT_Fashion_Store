@model doan1_v1.Models.Order

@{
    ViewData["Title"] = "Chi tiết đơn hàng";
    var order = ViewBag.Order;
    var totalPriceofProduct = 0.0;
}
<div class="page-inner">
    <div class="page-header">
        <h3 class="fw-bold mb-3">NTFashion</h3>
        <ul class="breadcrumbs mb-3">
            <li class="nav-home">
                <a href="#">
                    <i class="icon-home"></i>
                </a>
            </li>
            <li class="separator">
                <i class="icon-arrow-right"></i>
            </li>
            <li class="nav-item">
                <a href="#">Quản lý</a>
            </li>
            <li class="separator">
                <i class="icon-arrow-right"></i>
            </li>
            <li class="nav-item">
                <a asp-action="Index">Quản lý đơn hàng</a>
            </li>
        </ul>
    </div>

    <div class="page-inner">
        <div class="page-header">
            <h3 class="fw-bold mb-3">NTFashion</h3>
            <ul class="breadcrumbs mb-3">
                <li class="nav-home">
                    <a href="#">
                        <i class="icon-home"></i>
                    </a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <a href="#">Quản lý</a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <a href="#">Quản lý đơn hàng</a>
                </li>
            </ul>
        </div>
        <form class="row" action="">

            <div class="mb-3">
                <label for="name" class="form-label">Tên khách hàng</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.FullName">
            </div>

            <div class="mb-3">
                <label for="name" class="form-label">Địa chỉ</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.Address">
            </div>

            <div class="mb-3">
                <label for="name" class="form-label">Số điện thoại</label>
                <input type="text" disabled class="form-control" id="name" value="@order.Customer.PhoneNumber">
            </div>

            <div class="mb-3">
                <label for="datepurchase" class="form-label">Ngày đặt: @order.DateOrder</label><br>
            </div>
            <div class="mb-3">
                <label for="datepurchase" class="form-label">Ngày giao hàng: @order.DateReceive</label>
            </div>
            <!-- bảng hàng hóa -->
            <div class="mb-3">
                <table class="table" id="tableProduct">
                    <thead>
                        <tr>
                            <th>Tên sản phẩm</th>
                            <th>Danh mục</th>
                            <th>Màu sắc</th>
                            <th>Kích thước</th>
                            <th>Chất liệu</th>
                            <th>Nhà sản xuất</th>
                            <th>Số lượng</th>
                            <th>Đơn giá</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var detail in order.OrderProductDetails)
                        {
                            <tr>
                                <td>@detail.Product.Name</td>
                                <td>@detail.Product.Category.Name</td>
                                <td>@detail.Product.Color</td>
                                <td>@detail.Product.Dimension</td>
                                <td>@detail.Product.Material</td>
                                <td>@detail.Product.Productor</td>
                                <td>@detail.Quantity</td>
                                <td>@detail.PriceSale.ToString("N0")</td>
                                <td>
                                    @{
                                        totalPriceofProduct += detail.Quantity * detail.PriceSale;
                                    }
                                    @totalPriceofProduct.ToString("N0")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="mb-3">
                <label for="tongTien">Phí vận chuyển:</label>
                <input type="number" disabled class="form-control" id="tongTien" name="" value="@order.DeliveryCost">
            </div>
            <div class="mb-3">
                @{
                    //kiem tra otherCost no co null hay k
                    var otherCost = order.OtherCost;
                    if (otherCost == null)
                    {
                        otherCost = 0;
                    }

                }
                <label for="tongTien">Phí khác:</label>
                <input type="number" disabled class="form-control" id="tongTien" name="" value="@otherCost">
            </div>

            <div class="mb-3">
                @{
                    var totalPrice = totalPriceofProduct + order.DeliveryCost + otherCost;
                }
                <label for="tongTien">Tổng tiền:</label>
                <input type="number" class="form-control" id="tongTien" name="" disabled value="@totalPrice">
            </div>

            <div class="mb-3">
                <label for="office" class="form-label">Ghi chú (nếu có)</label>
                <textarea class="form-control" rows="5" name="note" id=""></textarea>
            </div>
            <div class="mb-3-md">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Đóng</button>
                <button type="submit" class="btn btn-primary">Tạo</button>
            </div>

        </form>
    </div>
    @* <h1>Details</h1>

    <div>
    <h4>Order</h4>
    <hr />
    <dl class="row">
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.DateOrder)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.DateOrder)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.DateReceive)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.DateReceive)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.DeliveryCost)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.DeliveryCost)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.OtherCost)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.OtherCost)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.Status)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.Status)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.Note)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.Note)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.IsDel)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.IsDel)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.AdminId)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.AdminId)
    </dd>
    <dt class = "col-sm-2">
    @Html.DisplayNameFor(model => model.CustomerId)
    </dt>
    <dd class = "col-sm-10">
    @Html.DisplayFor(model => model.CustomerId)
    </dd>
    </dl>
    </div>
    <div>
    <a asp-action="Edit" asp-route-id="@Model?.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
    </div>
    *@
